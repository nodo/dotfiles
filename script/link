#!/bin/bash
# Symlink dotfiles and config directories

source "$(dirname "$0")/lib.sh"
set -x

# Link dotfiles to home directory
files=(
	"ripgreprc"
	"gitconfig"
	"tmux.conf"
	"zshrc"
)
for file in ${files[@]}; do
	ln -fs "$DOTFILES_DIR/config/${file}" "$HOME/.${file}"
done

# Link config directories
mkdir -p "$HOME/.config"
ln -fs "$DOTFILES_DIR/config/starship.toml" "$HOME/.config/starship.toml"

# Remove existing directories/symlinks before linking to avoid nested symlinks
rm -rf "$HOME/.config/nvim"
ln -s "$DOTFILES_DIR/nvim" "$HOME/.config/nvim"

# Link terminal configs on macOS
if [[ "$OS" == "Darwin" ]]; then
  rm -rf "$HOME/.config/alacritty"
  ln -s "$DOTFILES_DIR/alacritty" "$HOME/.config/alacritty"
  rm -rf "$HOME/.config/ghostty"
  ln -s "$DOTFILES_DIR/ghostty/config" "$HOME/.config/ghostty"
fi
