# needed for GitHub codespaces
export SHELL=/bin/zsh

# Homebrew (works on macOS and Linux)
if [[ -f /opt/homebrew/bin/brew ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
elif [[ -f /usr/local/bin/brew ]]; then
  eval "$(/usr/local/bin/brew shellenv)"
elif [[ -f /home/linuxbrew/.linuxbrew/bin/brew ]]; then
  eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi


# ----- History -----
HISTFILE="$HOME/.zsh_history"
HISTSIZE=50000
SAVEHIST=50000
setopt APPEND_HISTORY           # don't overwrite history
setopt INC_APPEND_HISTORY       # write history as commands are entered
setopt SHARE_HISTORY            # share across sessions
setopt HIST_IGNORE_DUPS         # ignore consecutive duplicates
setopt HIST_IGNORE_SPACE        # ignore commands starting with a space
setopt HIST_REDUCE_BLANKS       # remove superfluous blanks
setopt EXTENDED_HISTORY         # add timestamps

# ----- Safer shell behavior -----
setopt NO_BEEP
setopt INTERACTIVE_COMMENTS
setopt AUTO_CD                  # `foo` becomes `cd foo` when foo is a dir
setopt AUTO_PUSHD               # pushd on cd (enables `dirs -v`)
setopt PUSHD_IGNORE_DUPS
setopt PUSHD_SILENT
setopt CORRECT                  # spelling correction for commands
setopt COMPLETE_IN_WORD         # complete from middle of word

# ----- Key bindings (sane defaults) -----
bindkey -e

# ----- PATH management -----
typeset -U path PATH
path=(
  "$HOME/.local/bin"
  "$HOME/bin"
  $path
)

# ----- Env vars -----
export CLICOLOR=1
export EDITOR='nvim'
export GIT_OPEN='nvim'
export GITHUB_USER=nodo
export RIPGREP_CONFIG_PATH="$HOME/.ripgreprc"
export ANTHROPIC_BASE_URL="https://api.githubcopilot.com"

# ----- Aliases -----
alias ll='ls -lah'
alias la='ls -A'
alias ..='cd ..'
alias ...='cd ../..'

eval "$(starship init zsh)"
